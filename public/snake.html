<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Snake – ClayRon</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body, html { height:100%; margin:0; display:flex; align-items:center; justify-content:center; background:#e8f0f8; }
    #board { background:#fff; border:2px solid #0055aa; }
    #controls button { width:50px; margin:5px; }
    #score { position:absolute; top:20px; left:20px; font-family:Montserrat; font-weight:600; }
  </style>
</head>
<body>

  <div id="score">Score: 0</div>
  <canvas id="board" width="400" height="400"></canvas>
  <div id="controls" class="d-md-none text-center" style="position:absolute;bottom:20px;">
    <button data-dir="up" class="btn btn-secondary">▲</button><br>
    <button data-dir="left" class="btn btn-secondary">◀</button>
    <button data-dir="right" class="btn btn-secondary">▶</button><br>
    <button data-dir="down" class="btn btn-secondary">▼</button>
  </div>

<script>
(function(){
  const cvs=document.getElementById('board'), ctx=cvs.getContext('2d');
  const size=20, cols=20, rows=20;
  let snake=[{x:10,y:10}], dir={x:1,y:0}, food={}, score=0;
  function placeFood(){
    food={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)};
  }
  function draw(){
    ctx.fillStyle='#fff'; ctx.fillRect(0,0,400,400);
    ctx.fillStyle='#0055aa'; snake.forEach(s=>ctx.fillRect(s.x*size,s.y*size,size-2,size-2));
    ctx.fillStyle='#e63946'; ctx.fillRect(food.x*size,food.y*size,size-2,size-2);
    document.getElementById('score').innerText=`Score: ${score}`;
  }
  function update(){
    const head={x:(snake[0].x+dir.x+cols)%cols, y:(snake[0].y+dir.y+rows)%rows};
    if(snake.some(s=>s.x===head.x&&s.y===head.y)){ return clearInterval(loop), alert('Game Over'); }
    snake.unshift(head);
    if(head.x===food.x&&head.y===food.y){ score++; placeFood(); }
    else snake.pop();
    draw();
  }
  placeFood();
  const loop=setInterval(update,120);

  document.addEventListener('keydown',e=>{
    if(e.key==='ArrowUp' && dir.y===0) dir={x:0,y:-1};
    if(e.key==='ArrowDown'&& dir.y===0) dir={x:0,y:1};
    if(e.key==='ArrowLeft'&& dir.x===0) dir={x:-1,y:0};
    if(e.key==='ArrowRight'&&dir.x===0) dir={x:1,y:0};
  });
  document.querySelectorAll('#controls button').forEach(b=>{
    b.onclick=()=>{ const d=b.dataset.dir;
      if(d==='up'&&dir.y===0) dir={x:0,y:-1};
      if(d==='down'&&dir.y===0) dir={x:0,y:1};
      if(d==='left'&&dir.x===0) dir={x:-1,y:0};
      if(d==='right'&&dir.x===0) dir={x:1,y:0};
    };
  });
})();
</script>

</body>
</html>
